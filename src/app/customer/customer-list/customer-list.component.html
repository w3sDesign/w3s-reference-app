<!-- Initial version based on Metronic 5.5.5. -->

<div class="mat-elevation-z8" style="margin:30px;">

  <!-- ################################################# -->
  <!-- Collapsable Expansion Panel for Search Filters-->
  <!-- ################################################# -->

  <mat-expansion-panel>

    <!-- ################################################ -->
    <!-- Expansion Header: Showing active filters -->
    <!-- ################################################ -->

    <mat-expansion-panel-header>

      <mat-panel-title>
        Search Filters
      </mat-panel-title>

      <mat-panel-description>
        Currently 2 filters active: Status, Type
      </mat-panel-description>

    </mat-expansion-panel-header>

    <!-- ################################################ -->
    <!-- Expansion Content: All Filter input fields -->
    <!-- ################################################ -->

    <div class="flex-box" style="padding:0">

      <mat-form-field style="padding-bottom: 16px">
        <input matInput #searchInput placeholder="Search">
        <mat-hint align="start">
          <strong>Search</strong> in all fields
        </mat-hint>
      </mat-form-field>

      <mat-form-field>
        <mat-select [(value)]="filterStatus" (selectionChange)="loadCustomers()">
          <mat-option value="">All</mat-option>
          <mat-option value="0">Suspended</mat-option>
          <mat-option value="1">Active</mat-option>
          <mat-option value="Pending">Pending</mat-option>
        </mat-select>
        <mat-hint align="start">
          <strong>Filter</strong> by Status
        </mat-hint>
      </mat-form-field>

      <mat-form-field>
        <mat-select [(value)]="filterType" (selectionChange)="loadCustomers()">
          <mat-option value="">All</mat-option>
          <mat-option value="0">Business</mat-option>
          <mat-option value="1">Individual</mat-option>
        </mat-select>
        <mat-hint align="start">
          <strong>Filter</strong> by Type
        </mat-hint>
      </mat-form-field>

    </div>

    <div class="flex-box" style="padding-left:0; padding-top:24px">

      <button mat-raised-button color="xprimary" matTooltip="Add / Remove Filters" (click)="TODO()">
        Adapt Filters
      </button>

      <button mat-raised-button color="xprimary" matTooltip="Start Searching" (click)="TODO()">
        Start Searching
      </button>

    </div>

  </mat-expansion-panel>


  <!-- ################################################# -->
  <!-- CRUD - Create, Update, and Delete Buttons -->
  <!-- ################################################# -->

  <!-- <mat-action-row #crudButtons style="align-items: center; font-size:14px;"> -->
  <div class="flex-box" #crudButtons>

    <div class="special-font">
      {{dataSource.totalNumberOfItems | async}} customers selected.
    </div>

    <div class="push-right">
      <button mat-raised-button color="primary" matTooltip="Create new customers" (click)="createCustomer()">
        Create
      </button>
    </div>

    <button mat-raised-button color="primary" matTooltip="Update selected customers" (click)="updateCustomer()">
      Update
    </button>

    <button mat-raised-button color="primary" matTooltip="Delete selected customers" (click)="deleteCustomers()">
      Delete
    </button>

    <button mat-raised-button matTooltip="Select which columns to display" (click)="TODO()">
      Settings
    </button>

  </div>
  <!-- </mat-action-row> -->
  <!-- End of Create/Update/Delete -->

  <mat-divider></mat-divider>


  <!-- ################################################ -->
  <!-- Material Data Table -->
  <!-- ################################################ -->

  <table mat-table #table matSort [dataSource]="dataSource">

    <!-- Selection/Checkbox column definition -->
    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef>
        <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()" [indeterminate]="selection.hasValue() && !isAllSelected()">
        </mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let row">
        <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)">
        </mat-checkbox>
      </td>
    </ng-container>

    <!-- All other column definitions -->
    <ng-container [matColumnDef]="column" *ngFor="let column of columnsToDefine">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>{{column | titlecase}}</th>
      <td mat-cell *matCellDef="let element">{{element[column]}}</td>
    </ng-container>

    <!-- Row definition -->
    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>

    <!--
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay;" (click)="selection.toggle(row)"> -->
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay;" (click)="this.gotoDetail(row)">

    </tr>

  </table>
  <!-- End data table -->


  <!-- ################################################ -->
  <!-- Bottom row - spinner and paginator -->
  <!-- ################################################ -->
  <!-- <div style="display:flex; justify-content:flex-end;"> -->

  <mat-action-row style="align-items: center">
    <mat-spinner [diameter]="20" *ngIf="dataSource.isLoading | async">
    </mat-spinner>

    <mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 50, 100, 250, 500]" [length]="dataSource.totalNumberOfItems | async" [showFirstLastButtons]="true">
    </mat-paginator>
  </mat-action-row>
  <!-- End bottom row -->


</div>
