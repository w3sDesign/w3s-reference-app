<!-- <div> -->

<form (ngSubmit)="onSubmit()" *ngIf="form" [formGroup]="form" [ngClass]="formClass">

  <ng-container *ngIf="title">
    <h6>{{title}}</h6>
  </ng-container>


  <!-- ########################################################## -->
  <!-- Multiple data groups (e.g. Basic Data, Addresses, Contacts). -->
  <!-- ########################################################## -->

  <ng-container *ngIf="dataGroupNames">

    <ng-container *ngFor="let dataGroupName of dataGroupNames">


      <br>
      <h6> {{dataGroupName}} </h6>
      <mat-divider></mat-divider>




      <!--TODO <ng-container *ngIf="!isFormArray"> -->
      <ng-container *ngIf="dataGroupName !== 'Additional Addresses'">

        <div class="flex-box">

          <ng-container *ngFor="let question of questions">

            <!-- ########################################################## -->

            <w3s-dynamic-form-question *ngIf="question.groupName === dataGroupName" [question]="question" [options]="options" [form]="form">

            </w3s-dynamic-form-question>

            <!-- ########################################################## -->

          </ng-container>

        </div>

      </ng-container>




      <!-- TODO<ng-container *ngIf="isFormArray"> -->
      <ng-container *ngIf="dataGroupName === 'Additional Addresses'">

        <!-- <ng-container *ngFor="let nestedQuestion of questions[x].nestedQuestions"> -->

        <!-- <div class="flex-box"> -->

        <ng-container *ngFor="let question of questions">

          <w3s-dynamic-form-question *ngIf="question.groupName === dataGroupName" [question]="question" [options]="options" [form]="form">

          </w3s-dynamic-form-question>

        </ng-container>

        <!-- </div> -->

        <!-- </ng-container> -->

      </ng-container>






    </ng-container>

  </ng-container>


  <!-- ########################################################## -->
  <!-- No data groups. -->
  <!-- ########################################################## -->

  <ng-container *ngIf="!dataGroupNames">

    <div class="flex-box">

      <ng-container *ngFor="let question of questions">

        <w3s-dynamic-form-question [question]="question" [options]="options" [form]="form">

        </w3s-dynamic-form-question>

      </ng-container>

    </div>

  </ng-container>




  <!-- ########################################################## -->
  <!-- Submit form button -->
  <!-- ########################################################## -->

  <button type="submit" *ngIf="form" mat-raised-button matTooltip="Start Searching" [disabled]="!form.valid">Submit Dyn Form</button>


</form>

<div *ngIf="showTestValues" class="showTestValues">

  <ng-container *ngIf="payLoad">
    <br>#######dynamic-form-component: Saved the following values (form.value) :<br> {{payLoad}}
  </ng-container>

</div>
